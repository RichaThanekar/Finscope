<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí∞ Financial Advisory Tool</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">

        <a href="/" class="back-link">‚Üê Back to Dashboard</a>
        
        <header>
            <h1 class="main-header">üí∞ Financial Advisory Tool</h1>
        </header>

        <div class="main-content">
            <!-- Sidebar for inputs -->
            <aside class="sidebar">
                <h2>üìù Client Information</h2>
                
                <form id="financialForm">
                    <div class="form-section">
                        <h3>Personal Details</h3>
                        <div class="form-group">
                            <label for="age">Age</label>
                            <input type="range" id="age" name="age" min="22" max="65" value="32" oninput="updateValue('age')">
                            <span id="age-value">32</span>
                        </div>
                        
                        <div class="form-group">
                            <label for="marital_status">Marital Status</label>
                            <select id="marital_status" name="marital_status">
                                <option value="Single">Single</option>
                                <option value="Married" selected>Married</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="dependents">Number of Dependents</label>
                            <input type="number" id="dependents" name="dependents" min="0" max="10" value="2">
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Financial Information</h3>
                        <div class="form-group">
                            <label for="annual_income">Annual Income (‚Çπ)</label>
                            <input type="number" id="annual_income" name="annual_income" value="800000" step="50000">
                        </div>
                        
                        <div class="form-group">
                            <label for="monthly_expenses">Monthly Expenses (‚Çπ)</label>
                            <input type="number" id="monthly_expenses" name="monthly_expenses" value="40000" step="5000">
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Current Insurance</h3>
                        <div class="form-group">
                            <label for="current_coverage">Current Life Insurance Coverage (‚Çπ)</label>
                            <input type="number" id="current_coverage" name="current_coverage" value="5000000" step="500000">
                        </div>
                        
                        <div class="form-group">
                            <label for="annual_premium">Annual Premium (‚Çπ)</label>
                            <input type="number" id="annual_premium" name="annual_premium" value="25000" step="5000">
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Riders</h3>
                        <div class="form-group">
                            <label for="accident_cover">Accident Death Benefit (‚Çπ)</label>
                            <input type="number" id="accident_cover" name="accident_cover" value="1000000" step="100000">
                        </div>
                        
                        <div class="form-group">
                            <label for="critical_illness">Critical Illness Cover (‚Çπ)</label>
                            <input type="number" id="critical_illness" name="critical_illness" value="500000" step="100000">
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Outstanding Debts</h3>
                        <div class="form-group">
                            <label for="home_loan">Home Loan Outstanding (‚Çπ)</label>
                            <input type="number" id="home_loan" name="home_loan" value="2000000" step="100000">
                        </div>
                        
                        <div class="form-group">
                            <label for="other_debts">Other Debts (‚Çπ)</label>
                            <input type="number" id="other_debts" name="other_debts" value="0" step="50000">
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Assumptions</h3>
                        <div class="form-group">
                            <label for="inflation_rate">Expected Inflation Rate (%)</label>
                            <input type="range" id="inflation_rate" name="inflation_rate" min="3.0" max="10.0" step="0.5" value="6.5" oninput="updateValue('inflation_rate')">
                            <span id="inflation_rate-value">6.5%</span>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary">üìä Analyze</button>
                </form>
            </aside>

            <!-- Main Results Area -->
            <main class="results-area">
                <div id="loading" style="display: none;">
                    <div class="spinner"></div>
                    <p>Analyzing your financial data...</p>
                </div>

                <div id="results" style="display: none;">
                    <!-- Coverage Analysis -->
                    <section class="section">
                        <h2 class="section-header">üõ°Ô∏è Coverage Analysis</h2>
                        <div class="metrics-row">
                            <div class="metric-card">
                                <h4>Current Coverage</h4>
                                <p class="metric-value" id="current-coverage-display">‚Çπ0</p>
                                <p class="metric-subtitle" id="coverage-multiplier">0x income</p>
                            </div>
                            <div class="metric-card">
                                <h4>Recommended Min</h4>
                                <p class="metric-value" id="recommended-min">‚Çπ0</p>
                                <p class="metric-subtitle">10x income</p>
                            </div>
                            <div class="metric-card">
                                <h4>Coverage Gap</h4>
                                <p class="metric-value" id="coverage-gap">‚Çπ0</p>
                                <p class="metric-subtitle" id="coverage-status">Status</p>
                            </div>
                        </div>
                        <div id="coverage-alert"></div>
                    </section>

                    <!-- Premium Analysis -->
                    <section class="section">
                        <h2 class="section-header">üí≥ Premium Analysis</h2>
                        <div class="metrics-row">
                            <div class="metric-card">
                                <h4>Current Premium</h4>
                                <p class="metric-value" id="current-premium-display">‚Çπ0</p>
                                <p class="metric-subtitle" id="premium-percentage">0% of income</p>
                            </div>
                            <div class="metric-card">
                                <h4>Max Affordable</h4>
                                <p class="metric-value" id="max-affordable">‚Çπ0</p>
                                <p class="metric-subtitle">10% of income</p>
                            </div>
                            <div class="metric-card">
                                <h4>Additional Capacity</h4>
                                <p class="metric-value" id="additional-capacity">‚Çπ0</p>
                            </div>
                        </div>
                        <div id="premium-info" class="info-card"></div>
                    </section>

                    <!-- Rider Analysis -->
                    <section class="section">
                        <h2 class="section-header">üîí Rider Analysis</h2>
                        <div class="metrics-row">
                            <div class="metric-card">
                                <h4>Critical Illness (Current)</h4>
                                <p class="metric-value" id="ci-current">‚Çπ0</p>
                            </div>
                            <div class="metric-card">
                                <h4>Critical Illness (Recommended)</h4>
                                <p class="metric-value" id="ci-recommended">‚Çπ0</p>
                                <p class="metric-subtitle">3x income</p>
                            </div>
                        </div>
                        <div class="metrics-row">
                            <div class="metric-card">
                                <h4>Accident Cover (Current)</h4>
                                <p class="metric-value" id="accident-current">‚Çπ0</p>
                            </div>
                            <div class="metric-card">
                                <h4>CI Coverage Gap</h4>
                                <p class="metric-value" id="ci-gap">‚Çπ0</p>
                            </div>
                        </div>
                    </section>

                    <!-- Financial Health Score -->
                    <section class="section sidebar-scores">
                        <h2 class="section-header">üìä Financial Health</h2>
                        <div class="score-card">
                            <div class="score-item">
                                <span>Coverage Score</span>
                                <strong id="coverage-score">0/10</strong>
                            </div>
                            <div class="score-item">
                                <span>Premium Score</span>
                                <strong id="premium-score">0/10</strong>
                            </div>
                            <div class="score-item">
                                <span>Debt Management</span>
                                <strong id="debt-score">0/10</strong>
                            </div>
                            <div class="score-item">
                                <span>Savings Rate</span>
                                <strong id="savings-score">0/10</strong>
                            </div>
                            <div class="score-item overall">
                                <span>Overall Score</span>
                                <strong id="overall-score">0/10</strong>
                            </div>
                        </div>

                        <h3 class="section-header" style="margin-top: 2rem;">üìà Key Metrics</h3>
                        <div class="score-card">
                            <div class="score-item">
                                <span>Monthly Savings</span>
                                <strong id="monthly-savings">‚Çπ0</strong>
                            </div>
                            <div class="score-item">
                                <span>Savings Rate</span>
                                <strong id="savings-rate">0%</strong>
                            </div>
                            <div class="score-item">
                                <span>Debt-to-Income</span>
                                <strong id="debt-to-income">0x</strong>
                            </div>
                        </div>
                    </section>

                    <!-- Recommendations -->
                    <section class="section">
                        <h2 class="section-header">üí° Personalized Recommendations</h2>
                        <div id="recommendations-list"></div>
                    </section>

                    <!-- Future Planning -->
                    <section class="section">
                        <h2 class="section-header">üìà Future Planning</h2>
                        <div class="metrics-row">
                            <div class="metric-card">
                                <h4>Inflation Impact (10 years)</h4>
                                <div class="future-planning">
                                    <p><strong>Current Annual Expenses:</strong> <span id="current-expenses">‚Çπ0</span></p>
                                    <p><strong>Future Annual Expenses:</strong> <span id="future-expenses">‚Çπ0</span></p>
                                    <p class="increase" id="expense-increase">+0%</p>
                                </div>
                            </div>
                            <div class="metric-card">
                                <h4>Action Timeline</h4>
                                <div class="timeline">
                                    <p><strong>Next 30 Days:</strong></p>
                                    <ul>
                                        <li>Review and increase life insurance coverage</li>
                                        <li>Start building emergency fund</li>
                                    </ul>
                                    <p><strong>Next 3 Months:</strong></p>
                                    <ul>
                                        <li>Enhance critical illness cover</li>
                                        <li>Optimize debt repayment strategy</li>
                                    </ul>
                                    <p><strong>Next 6 Months:</strong></p>
                                    <ul>
                                        <li>Set up systematic investments</li>
                                        <li>Annual insurance review process</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Generate Report Button -->
                    <section class="section">
                        <button id="generateReport" class="btn btn-success">üìÑ Generate Detailed Summary Report</button>
                    </section>

                    <!-- Detailed Report Display -->
                    <section id="detailed-report" style="display: none;">
                        <h2 class="section-header">üìÑ Detailed Financial Analysis Report</h2>
                        <div id="report-content" class="report-content"></div>
                        <button id="downloadReport" class="btn btn-secondary">üì• Download Report as Markdown</button>
                    </section>
                </div>

                <footer>
                    <p><em>This analysis is based on standard financial planning principles. Please consult a certified financial planner for personalized advice.</em></p>
                </footer>
            </main>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
